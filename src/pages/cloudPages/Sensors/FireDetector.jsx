import React , {useState , useEffect} from 'react'
import '../style.css';
import Pusher from "pusher-js";
import Swal from 'sweetalert2';
const FireDetector = () => {
  const [smoke , setSmoke] = useState(false);
  useEffect(()=>{
    // this connect to pusher using public key
    var pusher = new Pusher('7bc2c2e2db41d26e2652', {
      cluster: 'mt1'
    });

    const channel = pusher.subscribe('Cloud');
    channel.bind('Smoke', function (data){
      // this when trigger event in backend should this function run and update messages for all
      // users
      console.log(data);
      if(parseInt(data.Smoke) > 3000){
        setSmoke(true);
        const Toast = Swal.mixin({
          toast: true,
          position: "top-center",
          showConfirmButton: false,
          timer: 1000,
          timerProgressBar: true,
          didOpen: (toast) => {
            toast.onmouseenter = Swal.stopTimer;
            toast.onmouseleave = Swal.resumeTimer;
          }
        });
        Toast.fire({
          icon: "info",
          title: "!..انذار حريق"
        });
    }else{
        setSmoke(false);
    }
      
    
    });
  },[]);
  return (
    <div id='speaker'>
 {smoke? <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_117_88)">
<path d="M22.5115 0.169236C21.8942 0.171159 21.2115 0.448082 20.5885 1.06924L9.59038 13.5096H1.29808C0.238462 13.5096 -0.625 14.3731 -0.625 15.4327V30.8173C-0.625 31.8769 0.238462 32.7404 1.29808 32.7404H9.59231L20.5288 45.1212C22.4519 47.0442 24.375 46.0596 24.375 43.4385V2.50962C24.375 0.988466 23.5423 0.15962 22.5115 0.165389V0.169236ZM36.4538 4.01539C36.0448 4.08674 35.6699 4.28854 35.3851 4.59062C35.1003 4.8927 34.9209 5.27884 34.8737 5.69133C34.8265 6.10382 34.9141 6.52049 35.1234 6.87908C35.3326 7.23767 35.6523 7.51892 36.0346 7.68077C38.8955 9.1191 41.2992 11.3259 42.9762 14.0538C44.6532 16.7818 45.5371 19.9229 45.5288 23.125C45.5288 29.9019 41.6827 35.7212 36.0327 38.5692C35.7756 38.6587 35.5404 38.8017 35.3427 38.9889C35.145 39.176 34.9892 39.403 34.8858 39.6548C34.7824 39.9066 34.7336 40.1775 34.7426 40.4496C34.7517 40.7217 34.8185 40.9888 34.9384 41.2331C35.0584 41.4775 35.2289 41.6936 35.4387 41.8671C35.6484 42.0407 35.8926 42.1677 36.1551 42.2399C36.4176 42.312 36.6924 42.3276 36.9614 42.2856C37.2304 42.2435 37.4874 42.1449 37.7154 41.9962C44.625 38.5096 49.375 31.3712 49.375 23.125C49.375 14.8789 44.6231 7.74039 37.7154 4.25385C37.3863 4.07017 37.0105 3.98725 36.6346 4.01539C36.5744 4.01256 36.5141 4.01256 36.4538 4.01539ZM31.8865 11.4654C31.4725 11.4958 31.0793 11.6594 30.766 11.9317C30.4526 12.2041 30.2357 12.5705 30.1479 12.9763C30.06 13.3821 30.1058 13.8054 30.2785 14.183C30.4511 14.5606 30.7414 14.8722 31.1058 15.0712C34.0731 16.9154 35.9135 19.8365 35.9135 23.125C35.9135 26.4365 34.0442 29.3962 31.0462 31.2385C30.8106 31.3613 30.6031 31.5317 30.4367 31.7387C30.2703 31.9458 30.1485 32.1851 30.0792 32.4416C30.0099 32.698 29.9944 32.966 30.0338 33.2288C30.0732 33.4915 30.1666 33.7432 30.3082 33.968C30.4497 34.1928 30.6363 34.3859 30.8561 34.535C31.076 34.6841 31.3243 34.7861 31.5856 34.8344C31.8468 34.8828 32.1152 34.8765 32.3738 34.816C32.6325 34.7554 32.8758 34.642 33.0885 34.4827C37.0692 32.0404 39.7596 27.8865 39.7596 23.125C39.7596 18.3923 37.0923 14.2154 33.1481 11.7673C32.8258 11.5615 32.4496 11.4563 32.0673 11.4654C32.0071 11.4626 31.9468 11.4626 31.8865 11.4654Z" fill="#D20000"/>
</g>
<defs>
<clipPath id="clip0_117_88">
<rect width="50" height="50" fill="white"/>
</clipPath>
</defs>
</svg>

: <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M29.99 7.51499C29.99 5.33249 27.39 4.19749 25.79 5.68249L16.11 14.665C15.8791 14.8799 15.5754 14.9996 15.26 15H8.73999C7.74543 15 6.7916 15.3951 6.08834 16.0983C5.38508 16.8016 4.98999 17.7554 4.98999 18.75V31.25C4.98999 32.2445 5.38508 33.1984 6.08834 33.9016C6.7916 34.6049 7.74543 35 8.73999 35H15.26C15.5751 34.9997 15.8787 35.1185 16.11 35.3325L25.79 44.3175C27.39 45.8 29.99 44.6675 29.99 42.485V7.51499ZM32.855 19.115C32.9711 18.9986 33.109 18.9062 33.2609 18.8432C33.4128 18.7802 33.5756 18.7478 33.74 18.7478C33.9044 18.7478 34.0672 18.7802 34.2191 18.8432C34.3709 18.9062 34.5089 18.9986 34.625 19.115L38.74 23.2325L42.855 19.115C43.0894 18.8803 43.4074 18.7483 43.7391 18.748C43.9033 18.7479 44.066 18.7802 44.2178 18.8429C44.3696 18.9057 44.5075 18.9977 44.6237 19.1137C44.74 19.2298 44.8322 19.3676 44.8951 19.5193C44.9581 19.671 44.9906 19.8336 44.9907 19.9979C44.9908 20.1621 44.9586 20.3248 44.8958 20.4765C44.8331 20.6283 44.741 20.7663 44.625 20.8825L40.5075 25L44.625 29.115C44.8594 29.3497 44.9909 29.6679 44.9907 29.9996C44.9905 30.3313 44.8585 30.6494 44.6237 30.8837C44.5075 30.9998 44.3696 31.0918 44.2178 31.1546C44.066 31.2173 43.9033 31.2495 43.7391 31.2494C43.4074 31.2492 43.0894 31.1172 42.855 30.8825L38.74 26.7675L34.625 30.8825C34.5097 31.0019 34.3717 31.0971 34.2192 31.1626C34.0667 31.2281 33.9027 31.2626 33.7367 31.264C33.5708 31.2655 33.4062 31.2339 33.2525 31.171C33.0989 31.1082 32.9594 31.0153 32.842 30.898C32.7246 30.7806 32.6318 30.641 32.569 30.4874C32.5061 30.3338 32.4745 30.1692 32.4759 30.0032C32.4774 29.8373 32.5119 29.6732 32.5774 29.5207C32.6429 29.3682 32.7381 29.2303 32.8575 29.115L36.9725 25L32.8575 20.8825C32.6231 20.6481 32.4915 20.3302 32.4915 19.9987C32.4915 19.6673 32.6207 19.3494 32.855 19.115Z" fill="white"/>
</svg>

}
   </div>
  )
}

export default FireDetector;